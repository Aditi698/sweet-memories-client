(this["webpackJsonpmystory-client"]=this["webpackJsonpmystory-client"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},139:function(e,t,n){},141:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(9),o=n.n(s),i=(n(108),n(109),n(41)),l=n(13),u=n(187),d=n(26),j=n(175),b=n(179),p=n(192),h=n(148),m=n(180),f=n(77),O=(n(110),n.p+"static/media/memories.e3b31bf6.png"),v=n(19),x=n(18),g=n.n(x),_=n(28),y="FETCH_ALL",S="CREATE_POST",k="UPDATE_POST",N="DELETE_POST",w="LIKE_POST",C="AUTH",I="LOGOUT",P=n(80),L=n.n(P).a.create({baseURL:"https://sweet-memories-node-v1.herokuapp.com"});L.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var T=function(e){return L.post("/user/signin",e)},E=function(e){return L.post("/user/signup",e)},F=function(e,t){return L.post("/posts/updatepost/".concat(e),t)},A=function(e){return L.delete("/posts/deletepost/".concat(e))},z=function(e){return L.post("/posts/likepost/".concat(e))};function D(e){return{type:C,data:e}}function U(e){return{type:C,data:e}}var J=function(e){var t=Object(r.useState)(JSON.parse(localStorage.getItem("profile"))),n=Object(d.a)(t,2),c=n[0],s=n[1],o=Object(v.b)(),u=Object(l.f)(),x=Object(l.g)(),g=function(){o({type:I}),u.push("/"),s(null)};return Object(r.useEffect)((function(){var e=null===c||void 0===c?void 0:c.token;e&&(1e3*Object(f.a)(e).exp<(new Date).getTime()&&g());s(JSON.parse(localStorage.getItem("profile")))}),[x]),Object(a.jsxs)(j.a,{className:"navbar",position:"static",color:"inherit",children:[Object(a.jsx)("div",{className:"navbar__logocontainer",children:Object(a.jsxs)(i.b,{to:"/",children:[" ",Object(a.jsx)("img",{className:"navbar__appbarLogo",src:O,alt:"memories"})," "]})}),Object(a.jsx)(b.a,{className:"navbar__toolbar",children:c?Object(a.jsxs)("div",{className:"navbar__toolbarProfile",children:[Object(a.jsx)(p.a,{className:"navbar__avatar",alt:c.result.name,src:c.result.imageUrl,children:c.result.name.charAt(0)}),Object(a.jsx)(h.a,{className:"navbar__username",variant:"h6",children:c.result.name}),Object(a.jsx)(m.a,{variant:"contained",className:"navbar__logout",color:"secondary",onClick:g,children:"Logout"})]}):Object(a.jsx)(i.b,{to:"/auth",children:Object(a.jsx)(m.a,{variant:"contained",className:"navbar__signin",color:"primary",children:"Sign in"})})})]})},W=n(191),B=n(186),M=(n(139),n(185)),G=n(84),H=n.n(G),R=(n(141),n(181)),V=n(182),q=n(183),K=n(184),Y=n(85),Z=n.n(Y),Q=n(64),X=n.n(Q),$=n(87),ee=n.n($),te=n(86),ne=n.n(te);function ae(e){return{type:y,data:e}}function re(e){return{type:S,data:e}}function ce(e){return{type:k,data:e}}function se(e){return{type:N,id:e}}function oe(e){return{type:w,data:e}}var ie=function(e){var t,n,r,c,s=e.post,o=e.setCurrentId,i=Object(v.b)(),l=JSON.parse(localStorage.getItem("profile")),u=function(){return s.likes.length>0?s.likes.find((function(e){var t,n;return e===((null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t.googleId)||(null===l||void 0===l||null===(n=l.result)||void 0===n?void 0:n._id))}))?Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)(Z.a,{color:"primary",fontSize:"small"}),"\xa0",s.likes.length>2?"You and ".concat(s.likes.length-1," others"):"".concat(s.likes.length," like").concat(s.likes.length>1?"s":"")," "]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X.a,{fontSize:"small"}),"\xa0",s.likes.length," ",1===s.likes.length?"Like":"Likes"]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X.a,{fontSize:"small"}),"\xa0Like"]})};return Object(a.jsxs)(R.a,{className:"card",children:[Object(a.jsx)(V.a,{className:"card__media",image:s.selectedFile,title:s.title}),Object(a.jsxs)("div",{className:"card__overlay1",children:[Object(a.jsx)(h.a,{variant:"h6",children:s.name}),Object(a.jsx)(h.a,{variant:"body1",children:H()(s.createdAt).fromNow()})]}),((null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t.googleId)===(null===s||void 0===s?void 0:s.creator)||(null===l||void 0===l||null===(n=l.result)||void 0===n?void 0:n._id)===(null===s||void 0===s?void 0:s.creator))&&Object(a.jsx)("div",{className:"card__overlay2",children:Object(a.jsx)(m.a,{style:{color:"white"},size:"small",onClick:function(){return o(s._id)},children:Object(a.jsx)(ne.a,{fontSize:"default"})})}),Object(a.jsx)("div",{className:"card__details",children:Object(a.jsx)(h.a,{variant:"body2",color:"textSecondary",children:s.tags.map((function(e){return"#".concat(e," ")}))})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(h.a,{className:"card__message",variant:"h6",gutterBottom:!0,children:s.title}),Object(a.jsx)(h.a,{className:"card__message",color:"textSecondary",component:"p",variant:"body2",gutterBottom:!0,children:s.message})]}),Object(a.jsxs)(K.a,{className:"card__Actions",children:[Object(a.jsx)(m.a,{size:"small",disabled:!(null===l||void 0===l?void 0:l.result),onClick:function(){return i((e=s._id,function(){var t=Object(_.a)(g.a.mark((function t(n){var a,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e);case 3:a=t.sent,r=a.data,n(oe(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:Object(a.jsx)(u,{})}),((null===l||void 0===l||null===(r=l.result)||void 0===r?void 0:r.googleId)===(null===s||void 0===s?void 0:s.creator)||(null===l||void 0===l||null===(c=l.result)||void 0===c?void 0:c._id)===(null===s||void 0===s?void 0:s.creator))&&Object(a.jsxs)(m.a,{size:"small",onClick:function(){return i((e=s._id,function(){var t=Object(_.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:n(se(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:[Object(a.jsx)(ee.a,{color:"secondary",fontSize:"small"}),"\xa0 Delete"]})]})]})};var le=function(e){var t=e.setCurrentId,n=Object(v.c)((function(e){return e.posts}));return console.log("POSTS",n),n.length?Object(a.jsx)(B.a,{className:"posts__container",container:!0,alignItems:"stretch",spacing:3,children:n.map((function(e){return Object(a.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(ie,{post:e,setCurrentId:t})},e._id)}))}):Object(a.jsx)(M.a,{})},ue=n(12),de=n(95),je=n(190),be=n(88),pe=n.n(be);n(143);var he=function(e){var t,n=e.currentId,c=e.setCurrentId,s=Object(r.useState)({title:"",message:"",tags:"",selectedFile:""}),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(v.b)(),j=Object(v.c)((function(e){return n?e.posts.find((function(e){return e._id===n})):null})),b=JSON.parse(localStorage.getItem("profile"));Object(r.useEffect)((function(){j&&l(j)}),[j]);var p=function(){c(null),l({title:"",message:"",tags:"",selectedFile:""})};return(null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t.name)?Object(a.jsxs)(de.a,{className:"form__paper",children:[Object(a.jsxs)("h4",{className:"form__heading",children:[n?"Editing":"Creating"," Memory"]}),Object(a.jsxs)("form",{autoComplete:"off",noValidate:!0,onSubmit:function(e){var t,a;(e.preventDefault(),console.log(n),n)?u(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(a){var r,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,F(e,t);case 4:r=n.sent,c=r.data,a(ce(c)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,Object(ue.a)(Object(ue.a)({},i),{},{name:null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t.name}))):u(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var a,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=e,L.post("/posts/createpost",c);case 3:a=t.sent,r=a.data,n(re(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(ue.a)(Object(ue.a)({},i),{},{name:null===b||void 0===b||null===(a=b.result)||void 0===a?void 0:a.name})));p()},children:[Object(a.jsx)(je.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:i.title,onChange:function(e){return l(Object(ue.a)(Object(ue.a)({},i),{},{title:e.target.value}))}}),Object(a.jsx)(je.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,value:i.message,onChange:function(e){return l(Object(ue.a)(Object(ue.a)({},i),{},{message:e.target.value}))}}),Object(a.jsx)(je.a,{name:"tags",variant:"outlined",label:"Tags",fullWidth:!0,value:i.tags,onChange:function(e){return l(Object(ue.a)(Object(ue.a)({},i),{},{tags:e.target.value.split(",")}))}}),Object(a.jsx)(pe.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return l(Object(ue.a)(Object(ue.a)({},i),{},{selectedFile:t}))}}),Object(a.jsx)(m.a,{type:"submit",className:"form__btnSubmit",variant:"contained",color:"primary",size:"large",children:"Submit"}),Object(a.jsx)(m.a,{onClick:p,className:"form__btnSubmit",variant:"contained",color:"secondary",size:"small",children:"Clear"})]})]}):Object(a.jsx)(de.a,{className:"form__paper",children:Object(a.jsx)(h.a,{variant:"h6",align:"center",children:"Please login to create Memories!"})})};var me=function(e){var t=Object(r.useState)(null),n=Object(d.a)(t,2),c=n[0],s=n[1],o=Object(v.b)();return Object(r.useEffect)((function(){o(function(){var e=Object(_.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("/posts/getposts");case 3:n=e.sent,a=n.data,t(ae(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[c,o]),Object(a.jsx)("div",{children:Object(a.jsx)(W.a,{in:!0,children:Object(a.jsx)(u.a,{children:Object(a.jsxs)(B.a,{className:"app_postcontainer",container:!0,justify:"space-between",alignItems:"stretch",spacing:3,children:[Object(a.jsx)(B.a,{item:!0,xs:12,sm:7,children:Object(a.jsx)(le,{setCurrentId:s})}),Object(a.jsx)(B.a,{item:!0,xs:12,sm:4,children:Object(a.jsx)(he,{currentId:c,setCurrentId:s})})]})})})})},fe=n(55),Oe=(n(145),n(92)),ve=n.n(Oe),xe=n(89),ge=n(188),_e=n(189),ye=n(90),Se=n.n(ye),ke=n(91),Ne=n.n(ke);var we=function(e){var t=e.name,n=e.handleChange,r=e.label,c=e.half,s=e.autoFocus,o=e.type,i=e.handleShowPassword;return Object(a.jsx)(B.a,{item:!0,xs:12,sm:c?6:12,children:Object(a.jsx)(je.a,{name:t,onChange:n,variant:"outlined",required:!0,fullWidth:!0,label:r,autoFocus:s,type:o,InputProps:"password"===t?{endAdornment:Object(a.jsx)(ge.a,{position:"end",children:Object(a.jsx)(_e.a,{onClick:i,children:"password"===o?Object(a.jsx)(Se.a,{}):Object(a.jsx)(Ne.a,{})})})}:null})})},Ce=function(){return Object(a.jsx)("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:Object(a.jsx)("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"})})},Ie={firstName:"",lastName:"",email:"",password:"",confirmPassword:""};var Pe=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)(!1),i=Object(d.a)(o,2),j=i[0],b=i[1],f=Object(r.useState)(Ie),O=Object(d.a)(f,2),x=O[0],y=O[1],S=Object(v.b)(),k=Object(l.f)(),N=function(e){y(Object(ue.a)(Object(ue.a)({},x),{},Object(fe.a)({},e.target.name,e.target.value)))};return Object(a.jsx)(u.a,{component:"main",maxWidth:"xs",children:Object(a.jsxs)(de.a,{className:"auth__paper",children:[Object(a.jsx)(p.a,{className:"auth__avatar",children:Object(a.jsx)(ve.a,{})}),Object(a.jsx)(h.a,{variant:"h5",children:c?"Sign Up":"Sign In"}),Object(a.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault(),S(c?function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(a){var r,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E(e);case 3:r=n.sent,c=r.data,a(U(c)),t.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(x,k):function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(a){var r,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(e);case 3:r=n.sent,c=r.data,a(D(c)),t.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(x,k))},children:[Object(a.jsxs)(B.a,{container:!0,spacing:2,children:[c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(we,{name:"firstName",label:"First Name",handleChange:N,autoFocus:!0,half:!0}),Object(a.jsx)(we,{name:"lastName",label:"Last Name",handleChange:N,half:!0})]}),Object(a.jsx)(we,{name:"email",label:"Email Address",handleChange:N,type:"email"}),Object(a.jsx)(we,{name:"password",label:"Password",handleChange:N,type:j?"text":"password",handleShowPassword:function(){return b((function(e){return!e}))}}),c&&Object(a.jsx)(we,{name:"confirmPassword",label:"Repeat Password",handleChange:N,type:"password"})]}),Object(a.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"auth__formbutton",children:c?"Sign Up":"Sign In"}),Object(a.jsx)(xe.GoogleLogin,{clientId:"346266285649-k7uis0i0d7g4o2m742am6mplo3iidouc.apps.googleusercontent.com",render:function(e){return Object(a.jsx)(m.a,{className:"auth__googlebtn",color:"secondary",fullWidth:!0,onClick:e.onClick,disabled:e.disabled,startIcon:Object(a.jsx)(Ce,{}),variant:"contained",children:"Google Sign In"})},onSuccess:function(e){var t=null===e||void 0===e?void 0:e.profileObj,n=null===e||void 0===e?void 0:e.tokenId;try{S(function(e,t){return{type:C,data:{result:e,token:t}}}(t,n)),k.push("/")}catch(a){console.log(a)}},onFailure:function(e){console.log("Google Sign In was Unsuccessful. Try Again Later")},cookiePolicy:"single_host_origin"})]}),Object(a.jsx)(B.a,{container:!0,justify:"flex-end",children:Object(a.jsx)(B.a,{item:!0,children:Object(a.jsx)(m.a,{onClick:function(){s((function(e){return!e})),b(!1)},children:c?"Alrady have an account? Sign In":"Don't have an account? Sign Up"})})})]})})};var Le=function(){return Object(a.jsx)(i.a,{children:Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(u.a,{maxWidth:"lg",children:[Object(a.jsx)(J,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/",exact:!0,component:me}),Object(a.jsx)(l.a,{path:"/auth",exact:!0,component:Pe})]})]})})})},Te=n(37),Ee=n(93),Fe=n(94);var Ae=Object(Te.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.data;case S:return[].concat(Object(Fe.a)(e),[t.data]);case k:return e.map((function(e){return e._id===t.data._id?t.data:e}));case N:return e.filter((function(e){return e._id!==t.id}));case w:return e.map((function(e){return e._id===t.data._id?t.data:e}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return localStorage.setItem("profile",JSON.stringify(Object(ue.a)({},t.data))),Object(ue.a)(Object(ue.a)({},e),{},{authData:t.data});case I:return localStorage.clear(),Object(ue.a)(Object(ue.a)({},e),{},{authData:null});default:return e}}});var ze=Object(Te.d)(Ae,Object(Te.a)(Ee.a));o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v.a,{store:ze,children:Object(a.jsx)(Le,{})})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.c3c97f29.chunk.js.map